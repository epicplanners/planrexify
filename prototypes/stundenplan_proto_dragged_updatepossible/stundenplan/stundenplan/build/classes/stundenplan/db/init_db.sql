drop table sondereinheit;

drop table unterrichtet;

Drop table einheit;

drop table lehrer;

drop table wiederholen;

drop table termin;

CREATE TABLE einheit (
    einheitID    bigint primary key GENERATED BY DEFAULT AS IDENTITY,
    name         VARCHAR(30) UNIQUE NOT NULL,
    tag          VARCHAR(30),
    stunde       NUMERIC(2),
    raum         VARCHAR(30),
    notizen      VARCHAR(3000)
);

CREATE TABLE lehrer (
    nachname    VARCHAR(30) NOT NULL,
    vorname     VARCHAR(30),
    lehrerID   bigint primary key GENERATED BY DEFAULT AS IDENTITY
);

CREATE TABLE sondereinheit (
    sID               bigint primary key GENERATED BY DEFAULT AS IDENTITY,
    sondereinheitID   NUMERIC NOT NULL,
    beschreibung         VARCHAR(30) NOT NULL,
    datum                DATE NOT NULL,
    s_einheitID       bigint NOT NULL
);

CREATE TABLE termin (
    titel              VARCHAR(30) NOT NULL,
    "Start"            DATE NOT NULL,
    ende               DATE,
    ort                VARCHAR(30),
    benachrichtigung   NUMERIC(4),
    beschreibung       VARCHAR(2000),
    terminID          bigint primary key GENERATED BY DEFAULT AS IDENTITY
);

CREATE TABLE unterrichtet (
    einheitID   bigint NOT NULL,
    lehrerID     bigint NOT NULL
);

ALTER TABLE unterrichtet ADD CONSTRAINT unterrichtet_pk PRIMARY KEY ( einheitID,
                                                                      lehrerID );

CREATE TABLE wiederholen (
    taeglich            CHAR(1),
    woechentlich        CHAR(1),
    monatlich          CHAR(1),
    jaehrlich           CHAR(1),
    terminID           bigint NOT NULL
);

ALTER TABLE sondereinheit
    ADD CONSTRAINT sondereinheit_einheit_fk FOREIGN KEY ( s_einheitID )
        REFERENCES einheit ( einheitID );

ALTER TABLE unterrichtet
    ADD CONSTRAINT unterrichtet_einheit_fk FOREIGN KEY ( einheitID )
        REFERENCES einheit ( einheitID )
            ON DELETE CASCADE;

ALTER TABLE unterrichtet
    ADD CONSTRAINT unterrichtet_lehrer_fk FOREIGN KEY ( lehrerID )
        REFERENCES lehrer ( lehrerID );

ALTER TABLE wiederholen
    ADD CONSTRAINT wiederholen_termin_fk FOREIGN KEY ( terminID )
        REFERENCES termin ( terminID );
